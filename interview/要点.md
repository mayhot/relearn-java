# 丰图科技
## SQL性能调优
   + 表结构设计
    （1）规范化（1NF、2NF、3NF减少数据冗余）和反规范化（如冗余字段，提高查询性能）；
    （2）分区表，对大表进行分表，提高查询效率
    （3）选择合适的数据类型，减少存储空间和提高效率
   + 索引优化
    （1）创建合适索引，常用于`where`、`join`、`group by`、`order by`的列；
    （2）避免创建过多索引（对于频繁增删改的表）；
    （3）使用复合索引（多列查询时）
   + 查询优化
    （1）避免使用`select *`，选择使用的列；
    （2）优化子查询，将复杂的子查询尝试转换为`join`操作；
    （3）在大数据表上避免使用`join`操作；
    （4）使用`explain`分析查询计划，找出性能瓶颈；
     > `EXPLAN`：显示执行计划（模拟查询过程），包括执行顺序、使用的索引、表扫描方式等
     `EXPLAN ANALYZE`：显示执行计划（实际执行查询），除执行顺序、使用的索引、表扫描方式外，还有每个步骤的执行时间、返回的行数等；

     **重点关注：**
       + 全表扫描（type：ALL）
       + 未使用索引（key：null）
       + 临时表（Extra: Using temporary）,可能需要优化`group by`、`order by`

   + 数据库配置优化
    （1）调整内存分配，确保数据库有足够内存查询和缓存数据
    （2）使用连接池，减少数据库连接开销；
    （3）定期维护，更新统计信息和重建索引；
   + 硬件和系统优化
    （1）磁盘I/O优化：使用SSD固态硬盘；
    （2）CPU和内存优化，增加CPU核心和内存
## Nginx、Tomcat代理、集群、高可用配置
 ### Nginx
 #### 代理
   * 反向代理
   * 负载均衡（`upsteam`模块）
     * 轮询（默认策略）
     * 加权轮询（`weight = 2`）
     * IP哈希（`ip_hash`）
     * URI哈希（`hash $request_uri`）
     * 最少连接（`least_conn`）
     * 基于响应时间（`fair`）
     * 随机负载均衡（`random`）
     * 健康检查（自动剔除故障服务器`check interval=3000 rise=2 fall=3 timeout=1000;`）
   * 缓存：`proxy_cache`启用缓存，缓存静态资源，减少服务器压力
   * SSL/TLS：处理https请求，解密后转发请求到后端
  #### 集群
  ##### 架构
  客户端->负载均衡器（如HAProxy、Nginx 自身）->Nginx集群->后端服务
  #### 高可用
  + 基于keepalived（通过虚拟IP实现主从切换）
  （1）部署多个Nginx节点，其中一个作为主节点（master），其他为从节点（Backup）
  （2）keepalived在主节点上绑定一个虚拟IP，客户端通过虚拟IP访问；
  （3）主节点故障时，keepalived自动将虚拟IP切换到从节点
  
  + 基于DNS
  （1）为多个Nginx配置相同的域名，DNS服务器将域名解析到多个IP地址
  （2）客户端通过DNS轮询访问不同的Nginx节点
  + 基于负载均衡器
  ### Tomcat
# Redis、MongoDB、Kafka使用
# 高并发、高稳定性